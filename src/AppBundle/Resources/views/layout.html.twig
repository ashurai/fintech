<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="assets/img/logo-fav.png">
    <title>Beagle</title>
    <link rel="stylesheet" type="text/css" href="{{asset ('bundles/app/lib/perfect-scrollbar/css/perfect-scrollbar.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{asset ('bundles/app/lib/material-design-icons/css/material-design-iconic-font.min.css') }}"/><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="{{asset ('bundles/app/css/style.css') }}" type="text/css"/>
  </head>
  
  <body class="be-splash-screen">
    {% block body %}{% endblock %}
    <script src="{{asset ('bundles/app/lib/jquery/jquery.min.js') }}" type="text/javascript"></script>
    <script src="{{asset ('bundles/app/lib/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js') }}" type="text/javascript"></script>
    <script src="{{asset ('bundles/app/js/main.js') }}" type="text/javascript"></script>
    <script src="{{asset ('bundles/app/lib/bootstrap/dist/js/bootstrap.min.js') }}" type="text/javascript"></script>
    <script type="text/javascript">
      console.log('hello');
   
            
        function loadajax(){
            var tableHtml = "";
            $.ajax({
                url: "{{path('list_data_api')}}",
                success: function(data){
                    console.log(data);
                    $.each(JSON.parse(data), function(i, record) {
                        console.log(record.id);
                        var editUrl = '{{path("edit", {'id':'expenseId'})}}';
                        editUrl = editUrl.replace("expenseId",record.id);
                        tableHtml += "<tr><td>"+(i+1)+"</td><td>"+record.description+"</td><td>"+record.totalAmount+"</td><td><a href="+editUrl+">Edit</a></td></tr>";
                    });
                    $('#tableData').html(tableHtml);
                }
            });
        }
        $(function(){
            loadajax();
          });
      
    </script>
  </body>
</html>
